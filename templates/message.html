{% extends "layout.html" %}
{% block content %}

<h2>Message Details</h2>

<style>
.msg-card.lfl { border-left: 5px solid #32CD32; }
.msg-card.fdp { border-left: 5px solid #FF4500; }
.msg-card.ems { border-left: 5px solid #FFD700; }
.msg-card.pdp { border-left: 5px solid #1E90FF; }

.msg-card {
    background: #fff;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    padding: 15px 20px;
    margin-bottom: 20px;
    cursor: default;
}

.timestamp { font-size:12px; color:#666; }
</style>

{% set cls = '' %}
{% if message.capcodes %}
    {% if message.capcodes|regex_search('000120901|000923993|001420059|MMT|Traumaheli') %}{% set cls = 'lfl' %}
    {% elif message.capcodes|regex_search('00[0-9][0-9]0[0-9]{4}') or message.message|upper|regex_search('PRIO') %}{% set cls = 'fdp' %}
    {% elif message.capcodes|regex_search('00[0-9][0-9]2[0-9]{4}') or message.message|upper|regex_search('^A[12]|^B[12]') %}{% set cls = 'ems' %}
    {% elif message.capcodes|regex_search('00[0-9][0-9]3[0-9]{4}') or message.message|upper|regex_search('POLITIE') %}{% set cls = 'pdp' %}
    {% endif %}
{% endif %}

<div class="msg-card {{ cls }}">
    <strong>Message:</strong> {{ message.message }}<br>
    <strong>Timestamp:</strong> {{ message.timestamp }}<br>
    <strong>Capcodes:</strong> {{ message.capcodes }}
</div>

<a href="/" style="text-decoration:none;color:#0077cc;font-weight:bold;">&larr; Back to Live Feed</a>

{% endblock %}
